(function(){function b(b,c){var d=Math.cos(b*=a),e=Math.sin(b),f=Math.cos(c*=a),g=Math.sin(c);return[[d,0,-e],[-g*e,f,-g*d],[f*e,g,f*d]]}function c(a){return a}function d(a,b){a.scale=d3.rebind(a,b.scale),a.translate=d3.rebind(a,b.translate)}function e(a,b){return function(c){return c&&c.type in a?a[c.type](c):b}}function f(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+ -2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function g(a,b){a.type in h&&h[a.type](a,b)}function i(a,b){g(a.geometry,b)}function j(a,b){for(var c=a.features,d=0,e=c.length;d<e;d++)g(c[d].geometry,b)}function k(a,b){for(var c=a.coordinates,d=0,e=c.length;d<e;d++)b.apply(null,c[d])}function l(a,b){for(var c=a.coordinates,d=0,e=c.length;d<e;d++)for(var f=c[d],g=0,h=f.length;g<h;g++)b.apply(null,f[g])}function m(a,b){for(var c=a.coordinates,d=0,e=c.length;d<e;d++)for(var f=c[d][0],g=0,h=f.length;g<h;g++)b.apply(null,f[g])}function n(a,b){b.apply(null,a.coordinates)}function o(a,b){for(var c=a.coordinates[0],d=0,e=c.length;d<e;d++)b.apply(null,c[d])}function p(a){return a.source}function q(a){return a.target}function r(b,c){function r(b){var c=Math.sin(p-(b*=p))/q,d=Math.sin(b)/q,g=c*h*e+d*n*k,j=c*h*f+d*n*l,m=c*i+d*o;return[Math.atan2(j,g)/a,Math.atan2(m,Math.sqrt(g*g+j*j))/a]}var d=b[0]*a,e=Math.cos(d),f=Math.sin(d),g=b[1]*a,h=Math.cos(g),i=Math.sin(g),j=c[0]*a,k=Math.cos(j),l=Math.sin(j),m=c[1]*a,n=Math.cos(m),o=Math.sin(m),p=r.d=Math.acos(Math.max(-1,Math.min(1,i*o+h*n*Math.cos(j-d)))),q=Math.sin(p);return r}d3.geo={};var a=Math.PI/180;d3.geo.rotate=function(d,e,f){function i(b){var c=(b[0]+h)*a,d=b[1]*a,e=Math.sin(c),f=Math.cos(c),i=Math.cos(d),j=Math.sin(d),k=f*i,l=e*i,m=j,n=g[0],o=g[1],p=g[2];return n=k*n[0]+l*n[1]+m*n[2],o=k*o[0]+l*o[1]+m*o[2],p=k*p[0]+l*p[1]+m*p[2],[Math.atan2(o,n)/a,Math.asin(p)/a]}if(!(f=+f||0)&&!(e=+e||0)&&!(d=+d||0))return c;var g=b(e,f),h=d;return i.invert=function(b){var c=b[0]*a,d=b[1]*a,e=Math.sin(c),f=Math.cos(c),i=Math.cos(d),j=Math.sin(d),k=f*i,l=e*i,m=j,n=g[0],o=g[1],p=g[2],q=k*n[0]+l*o[0]+m*p[0],r=k*n[1]+l*o[1]+m*p[1],s=k*n[2]+l*o[2]+m*p[2];return[Math.atan2(r,q)/a-h,Math.asin(s)/a]},i},c.invert=c,d3.geo.zoom=function(){function c(c){return[a*c[0]+b[0],a*c[1]+b[1]]}var a=500,b=[480,250];return c.invert=function(c){return[(c[0]-b[0])/a,(c[1]-b[1])/a]},c.scale=function(b){return arguments.length?(a=+b,c):a},c.translate=function(a){return arguments.length?(b=[+a[0],+a[1]],c):b},c},d3.geo.azimuthal=function(){function j(d){var e=d[0]*a-f,g=d[1]*a,j=Math.cos(e),k=Math.sin(e),l=Math.cos(g),m=Math.sin(g),n=b!=="orthographic"?i*m+h*l*j:null,o,p=b==="stereographic"?1/(1+n):b==="gnomonic"?1/n:b==="equidistant"?(o=Math.acos(n),o?o/Math.sin(o):0):b==="equalarea"?Math.sqrt(2/(1+n)):1;return c([p*l*k,p*(i*l*j-h*m)])}var b="orthographic",c=d3.geo.zoom().scale(200),e,f,g,h,i;return j.invert=function(d){d=c.invert(d);var e=d[0],g=d[1],j=Math.sqrt(e*e+g*g),k=b==="stereographic"?2*Math.atan(j):b==="gnomonic"?Math.atan(j):b==="equidistant"?j:b==="equalarea"?2*Math.asin(.5*j):Math.asin(j),l=Math.sin(k),m=Math.cos(k);return[(f+Math.atan2(e*l,j*h*m+g*i*l))/a,Math.asin(m*i-(j?g*l*h/j:0))/a]},j.mode=function(a){return arguments.length?(b=a+"",j):b},j.origin=function(b){return arguments.length?(e=b,f=e[0]*a,g=e[1]*a,h=Math.cos(g),i=Math.sin(g),j):e},d(j,c),j.origin([0,0])},d3.geo.bonne=function(){function h(d){d=b(d);var e=d[0]*a,h=d[1]*a;if(f){var i=g+f-h,j=e*Math.cos(h)/i;e=i*Math.sin(j),h=i*Math.cos(j)-g}else e*=Math.cos(h),h*=-1;return c([e,h])}var b=d3.geo.rotate(),c=d3.geo.zoom(),e,f,g;return h.invert=function(d){d=c.invert(d);var e=d[0],h=d[1];if(f){var i=g+h,j=Math.sqrt(e*e+i*i);h=g+f-j,e=j*Math.atan2(e,i)/Math.cos(h)}else h*=-1,e/=Math.cos(h);return b.invert([e/a,h/a])},h.parallel=function(b){return arguments.length?(f=b*a,g=b===90||b===-90?0:1/Math.tan(f),h):f/a},h.origin=function(a){return arguments.length?(e=[+a[0],+a[1]],b=d3.geo.rotate(-e[0],e[1]),h):e},d(h,c),h.origin([0,0]).parallel(45).scale(200)},d3.geo.collignon=function(){function c(c){var d=(d=1-Math.sin(c[1]*a))>0?Math.sqrt(d):0;return b([1.1283791670955126*c[0]*a*d,1.772453850905516*(d-1)])}var b=d3.geo.zoom();return c.invert=function(c){c=b.invert(c);var d=-c[1]/1.772453850905516-1;return d=Math.abs(d=1-d*d)<1?Math.asin(d):d<0?-Math.PI/2:Math.PI,[(x=1-Math.sin(d))>0?c[0]/(1.1283791670955126*Math.sqrt(x)*a):0,d/a]},d(c,b),c},d3.geo.conic=function(){function k(b){var c=(g||1)*(a*b[0]-e),d=j==="equalarea"?g?Math.sqrt(h-2*g*Math.sin(a*b[1]))/g:h:j==="equidistant"?a*-b[1]:g?h/Math.pow(Math.tan(Math.PI/4+b[1]*a/2),g):h;return f([g?d*Math.sin(c):h*c,j==="equalarea"?g?d*Math.cos(c)-i:-Math.sin(a*b[1])/h:j==="equidistant"?d:g?d*Math.cos(c)-i:-Math.log(Math.tan(Math.PI/4+b[1]*a/2))])}function l(){var d=a*c[0],f=a*c[1],l=a*b[1],m=Math.cos(d);e=a*b[0];switch(j){case"equalarea":var n=Math.sin(d);g=.5*(n+Math.sin(f)),h=g?m*m+2*g*n:m,i=g?Math.sqrt(h-2*g*Math.sin(l))/g:0;break;case"equidistant":g=(m-Math.cos(f))/(f-d),h=g?m/g+d:m,i=h-l;break;case"conformal":g=Math.log(Math.cos(d)/Math.cos(f))/Math.log(Math.tan(Math.PI/4+f/2)/Math.tan(Math.PI/4+d/2)),h=g?Math.cos(d)*Math.pow(Math.tan(Math.PI/4+d/2),g)/g:1,i=g?h/Math.pow(Math.tan(Math.PI/4+l/2),g):0}return k}var b=[-98,38],c=[29.5,45.5],e,f=d3.geo.zoom().scale(1e3),g,h,i,j="equalarea";return k.invert=function(b){b=f.invert(b);var c=b[0],d=b[1],k=i+d,l=Math.atan2(c,k),m=Math.sqrt(c*c+k*k);return[(e+(g?l/g:c/h))/a,(j==="equalarea"?Math.asin(g?(h-m*m*g*g)/(2*g):-d*h):j==="equidistant"?-d:2*(g?Math.atan2(Math.pow(h,1/g),Math.pow((g<0?-1:1)*m,1/g)):Math.atan(Math.exp(-d)))-Math.PI/2)/a]},k.mode=function(a){return arguments.length?(j=a+"",k):j},k.origin=function(a){return arguments.length?(b=[+a[0],+a[1]],l()):b},k.parallels=function(a){return arguments.length?(c=typeof a=="number"?[a,-a]:[+a[0],+a[1]],l()):c},d(k,f),l()},d3.geo.albers=d3.geo.conic,d3.geo.albersUsa=function(){function e(e){var f=e[0],g=e[1];return(g>50?b:f<-140?c:g<21?d:a)(e)}var a=d3.geo.albers(),b=d3.geo.albers().origin([-160,60]).parallels([55,65]),c=d3.geo.albers().origin([-160,20]).parallels([8,18]),d=d3.geo.albers().origin([-60,10]).parallels([8,18]);return e.scale=function(f){return arguments.length?(a.scale(f),b.scale(f*.6),c.scale(f),d.scale(f*1.5),e.translate(a.translate())):a.scale()},e.translate=function(f){if(!arguments.length)return a.translate();var g=a.scale()/1e3,h=f[0],i=f[1];return a.translate(f),b.translate([h-400*g,i+170*g]),c.translate([h-190*g,i+200*g]),d.translate([h+580*g,i+430*g]),e},e.scale(a.scale())},d3.geo.cylindrical=function(){return d3.geo.conic().parallels(0).origin([0,0])},d3.geo.equirectangular=d3.geo.cylindrical,d3.geo.mercator=function(){return d3.geo.conic().mode("conformal").parallels(0).origin([0,0])},d3.geo.path=function(){function d(c,d){return typeof a=="function"&&(b=f(a.apply(this,arguments))),h(c)||null}function g(a){return c(a).join(",")}function j(a){var b=m(a[0]),c=0,d=a.length;while(++c<d)b-=m(a[c]);return b}function k(a){var b=d3.geom.polygon(a[0].map(c)),d=b.area(),e=b.centroid(d<0?(d*=-1,1):-1),f=e[0],g=e[1],h=d,i=0,j=a.length;while(++i<j)b=d3.geom.polygon(a[i].map(c)),d=b.area(),e=b.centroid(d<0?(d*=-1,1):-1),f-=e[0],g-=e[1],h-=d;return[f,g,6*h]}function m(a){return Math.abs(d3.geom.polygon(a.map(c)).area())}var a=4.5,b=f(a),c=d3.geo.albersUsa(),h=e({FeatureCollection:function(a){var b=[],c=a.features,d=-1,e=c.length;while(++d<e)b.push(h(c[d].geometry));return b.join("")},Feature:function(a){return h(a.geometry)},Point:function(a){return"M"+g(a.coordinates)+b},MultiPoint:function(a){var c=[],d=a.coordinates,e=-1,f=d.length;while(++e<f)c.push("M",g(d[e]),b);return c.join("")},LineString:function(a){var b=["M"],c=a.coordinates,d=-1,e=c.length;while(++d<e)b.push(g(c[d]),"L");return b.pop(),b.join("")},MultiLineString:function(a){var b=[],c=a.coordinates,d=-1,e=c.length,f,h,i;while(++d<e){f=c[d],h=-1,i=f.length,b.push("M");while(++h<i)b.push(g(f[h]),"L");b.pop()}return b.join("")},Polygon:function(a){var b=[],c=a.coordinates,d=-1,e=c.length,f,h,i;while(++d<e){f=c[d],h=-1;if((i=f.length-1)>0){b.push("M");while(++h<i)b.push(g(f[h]),"L");b[b.length-1]="Z"}}return b.join("")},MultiPolygon:function(a){var b=[],c=a.coordinates,d=-1,e=c.length,f,h,i,j,k,l;while(++d<e){f=c[d],h=-1,i=f.length;while(++h<i){j=f[h],k=-1;if((l=j.length-1)>0){b.push("M");while(++k<l)b.push(g(j[k]),"L");b[b.length-1]="Z"}}}return b.join("")},GeometryCollection:function(a){var b=[],c=a.geometries,d=-1,e=c.length;while(++d<e)b.push(h(c[d]));return b.join("")}}),i=d.area=e({FeatureCollection:function(a){var b=0,c=a.features,d=-1,e=c.length;while(++d<e)b+=i(c[d]);return b},Feature:function(a){return i(a.geometry)},Polygon:function(a){return j(a.coordinates)},MultiPolygon:function(a){var b=0,c=a.coordinates,d=-1,e=c.length;while(++d<e)b+=j(c[d]);return b},GeometryCollection:function(a){var b=0,c=a.geometries,d=-1,e=c.length;while(++d<e)b+=i(c[d]);return b}},0),l=d.centroid=e({Feature:function(a){return l(a.geometry)},Polygon:function(a){var b=k(a.coordinates);return[b[0]/b[2],b[1]/b[2]]},MultiPolygon:function(a){var b=0,c=a.coordinates,d,e=0,f=0,g=0,h=-1,i=c.length;while(++h<i)d=k(c[h]),e+=d[0],f+=d[1],g+=d[2];return[e/g,f/g]}});return d.projection=function(a){return c=a,d},d.pointRadius=function(c){return typeof c=="function"?a=c:(a=+c,b=f(a)),d},d},d3.geo.bounds=function(a){var b=Infinity,c=Infinity,d=-Infinity,e=-Infinity;return g(a,function(a,f){a<b&&(b=a),a>d&&(d=a),f<c&&(c=f),f>e&&(e=f)}),[[b,c],[d,e]]};var h={Feature:i,FeatureCollection:j,LineString:k,MultiLineString:l,MultiPoint:k,MultiPolygon:m,Point:n,Polygon:o};d3.geo.circle=function(){function g(){}function h(a){return f.distance(a)<d}function j(a){var b=-1,c=a.length,e=[],g,h,i,j,l;while(++b<c)l=f.distance(i=a[b]),l<d?(h&&e.push(r(h,i)((j-d)/(j-l))),e.push(i),g=h=null):(h=i,!g&&e.length&&(e.push(r(e[e.length-1],h)((d-j)/(l-j))),g=h)),j=l;return h&&e.length&&(l=f.distance(i=e[0]),e.push(r(h,i)((j-d)/(j-l)))),k(e)}function k(a){var b=0,c=a.length,d,e,g=c?[a[0]]:a,h,i=f.source();while(++b<c){h=f.source(a[b-1])(a[b]).coordinates;for(d=0,e=h.length;++d<e;)g.push(h[d])}return f.source(i),g}var b=[0,0],c=89.99,d=c*a,f=d3.geo.greatArc().target(Object);g.clip=function(a){return f.source(typeof b=="function"?b.apply(this,arguments):b),i(a)};var i=e({FeatureCollection:function(a){var b=a.features.map(i).filter(Object);return b&&(a=Object.create(a),a.features=b,a)},Feature:function(a){var b=i(a.geometry);return b&&(a=Object.create(a),a.geometry=b,a)},Point:function(a){return h(a.coordinates)&&a},MultiPoint:function(a){var b=a.coordinates.filter(h);return b.length&&{type:a.type,coordinates:b}},LineString:function(a){var b=j(a.coordinates);return b.length&&(a=Object.create(a),a.coordinates=b,a)},MultiLineString:function(a){var b=a.coordinates.map(j).filter(function(a){return a.length});return b.length&&(a=Object.create(a),a.coordinates=b,a)},Polygon:function(a){var b=a.coordinates.map(j);return b[0].length&&(a=Object.create(a),a.coordinates=b,a)},MultiPolygon:function(a){var b=a.coordinates.map(function(a){return a.map(j)}).filter(function(a){return a[0].length});return b.length&&(a=Object.create(a),a.coordinates=b,a)},GeometryCollection:function(a){var b=a.geometries.map(i).filter(Object);return b.length&&(a=Object.create(a),a.geometries=b,a)}});return g.origin=function(a){return arguments.length?(b=a,g):b},g.angle=function(b){return arguments.length?(d=(c=+b)*a,g):c},g.precision=function(a){return arguments.length?(f.precision(a),g):f.precision()},g},d3.geo.greatArc=function(){function e(){var a=typeof b=="function"?b.apply(this,arguments):b,e=typeof c=="function"?c.apply(this,arguments):c,f=r(a,e),g=d/f.d,h=0,i=[a];while((h+=g)<1)i.push(f(h));return i.push(e),{type:"LineString",coordinates:i}}var b=p,c=q,d=6*a;return e.distance=function(){var a=typeof b=="function"?b.apply(this,arguments):b,d=typeof c=="function"?c.apply(this,arguments):c;return r(a,d).d},e.source=function(a){return arguments.length?(b=a,e):b},e.target=function(a){return arguments.length?(c=a,e):c},e.precision=function(b){return arguments.length?(d=b*a,e):d/a},e},d3.geo.greatCircle=d3.geo.circle})();